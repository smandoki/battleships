(()=>{"use strict";function t(e){const n=[];return e.forEach((e=>{Array.isArray(e)?n.push(t(e)):n.push(e)})),n}function e(t,e){return Math.floor(Math.random()*(e-t))+t}class n{#t=0;#e;constructor(t){this.#e=t}hit(){this.isSunk()||this.#t++}isSunk(){return this.#t===this.#e}getLength(){return this.#e}getHitCount(){return this.#t}}class r{#n={};#r;#i=0;constructor(){this.#r=function(t,e){const n=new Array(7);for(let t=0;t<7;t++)n[t]=new Array(7);return n}()}addShip(t,e,r,i){const s=new n(r);for(let n=0;n<r;n++)"row"===i?this.#r[t+n][e]=this.#i:this.#r[t][e+n]=this.#i;this.#n[this.#i++]=s}receiveAttack(t,e){void 0===this.#r[t][e]?this.#r[t][e]="miss":(this.#n[this.#r[t][e]].hit(),this.#r[t][e]="hit")}isValidPlacement(t,e,n,r){for(let i=0;i<n;i++)if("row"===r){if(!this.#s(t+i,e))return!1}else if(!this.#s(t,e+i))return!1;return!0}#s(t,e){return t>=0&&t<7&&e>=0&&e<7&&void 0===this.#r[t][e]}isAllShipsSunk(){if(0===Object.keys(this.#n).length)return!1;for(const[t,e]of Object.entries(this.#n))if(!e.isSunk())return!1;return!0}getBoard(){return t(this.#r)}}const i=function(){const t=document.getElementById("root"),n=new r;let i;function s(t){}return{init:function(r){i=r,t.innerHTML="",function(t){const n=[2,3,3,4,5];for(;n.length>0;){const r=n.pop();let i,s,o;do{i=e(0,6),s=e(0,6),o=e(0,1)?"row":"col"}while(!t.isValidPlacement(i,s,r,o));t.addShip(i,s,r,o)}}(n);const o=document.createElement("div");o.setAttribute("id","gameboardPage");const d=document.createElement("div");d.classList.add("grid"),d.style.gridTemplateColumns="repeat(7, 1fr)",d.style.gridTemplateRows="repeat(7, 1fr)";for(let t=0;t<49;t++){const t=document.createElement("div");t.classList.add("cell"),d.appendChild(t)}o.appendChild(d);const c=document.createElement("div");c.classList.add("grid"),c.classList.add("computer-grid"),c.style.gridTemplateColumns="repeat(7, 1fr)",c.style.gridTemplateRows="repeat(7, 1fr)";for(let t=0;t<49;t++){const t=document.createElement("div");t.classList.add("cell"),t.addEventListener("click",s),c.appendChild(t)}o.appendChild(c),t.appendChild(o)}}}();(function(){const t=document.getElementById("root"),e=[2,3,3,4,5],n=["Place your carrier (length: 5)","Place your battleship (length: 4)","Place your cruiser (length: 3)","Place your submarine (length: 3)","Place your destroyer (length: 2)"],s=new r;let o="row",d=e.pop();function c(t){o="row"===o?"col":"row",t.target.innerText="row"===o?"Axis: row":"Axis: column"}function l(t){const r=t.target.dataset.index,{x:c,y:l}=h(r);s.isValidPlacement(c,l,d,o)&&(s.addShip(c,l,d,o),u(c,l,"ship",o,d),0!=n.length?(document.querySelector("h2").innerText=n.shift(),d=e.pop()):i.init(s))}function a(t){const e=t.target.dataset.index,n=document.querySelectorAll(".cell");for(const t of n)t.classList.remove("shipPlaceholder");const{x:r,y:i}=h(e);s.isValidPlacement(r,i,d,o)&&u(r,i,"shipPlaceholder",o,d)}function u(t,e,n,r,i){const s=document.querySelectorAll(".cell");for(let o=0;o<i;o++){let i;i="row"===r?p(t+o,e):p(t,e+o),s[i].classList.add(n)}}function h(t){return{y:Math.floor(t/7),x:t%7}}function p(t,e){return 7*e+t}return{init:function(){const e=document.createElement("div");e.setAttribute("id","shipPlacementPage");const r=document.createElement("h2");r.innerText=n.shift(),e.appendChild(r);const i=document.createElement("button");i.innerText="Axis: row",i.addEventListener("click",c),e.append(i);const s=document.createElement("div");s.classList.add("grid"),s.style.gridTemplateColumns="repeat(7, 1fr)",s.style.gridTemplateRows="repeat(7, 1fr)";for(let t=0;t<49;t++){const e=document.createElement("div");e.classList.add("cell"),e.dataset.index=t,e.addEventListener("mouseover",a),e.addEventListener("click",l),s.appendChild(e)}e.appendChild(s),t.appendChild(e)}}})().init()})();