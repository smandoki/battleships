(()=>{"use strict";function t(e){const n=[];return e.forEach((e=>{Array.isArray(e)?n.push(t(e)):n.push(e)})),n}class e{#t=0;#e;constructor(t){this.#e=t}hit(){this.isSunk()||this.#t++}isSunk(){return this.#t===this.#e}getLength(){return this.#e}getHitCount(){return this.#t}}class n{#n={};#r;#i=0;constructor(){this.#r=function(t,e){const n=new Array(7);for(let t=0;t<7;t++)n[t]=new Array(7);return n}()}addShip(t,n,r,i){const s=new e(r);for(let e=0;e<r;e++)"row"===i?this.#r[t+e][n]=this.#i:this.#r[t][n+e]=this.#i;this.#n[this.#i++]=s}receiveAttack(t,e){void 0===this.#r[t][e]?this.#r[t][e]="miss":(this.#n[this.#r[t][e]].hit(),this.#r[t][e]="hit")}isValidPlacement(t,e,n,r){for(let i=0;i<n;i++)if("row"===r){if(!this.#s(t+i,e))return!1}else if(!this.#s(t,e+i))return!1;return!0}#s(t,e){return t>=0&&t<7&&e>=0&&e<7&&void 0===this.#r[t][e]}isAllShipsSunk(){if(0===Object.keys(this.#n).length)return!1;for(const[t,e]of Object.entries(this.#n))if(!e.isSunk())return!1;return!0}getBoard(){return t(this.#r)}}(function(){const t=document.getElementById("root"),e=[2,3,3,4,5],r=["Place your carrier (length: 5)","Place your battleship (length: 4)","Place your cruiser (length: 3)","Place your submarine (length: 3)","Place your destroyer (length: 2)"],i=new n;let s="row",o=e.pop();function c(t){s="row"===s?"col":"row",t.target.innerText="row"===s?"Axis: row":"Axis: column"}function a(t){const n=t.target.dataset.index,{x:c,y:a}=h(n);i.isValidPlacement(c,a,o,s)&&(i.addShip(c,a,o,s),d(c,a,"ship",s,o),0!=r.length)&&(document.querySelector("h2").innerText=r.shift(),o=e.pop())}function l(t){const e=t.target.dataset.index,n=document.querySelectorAll(".cell");for(const t of n)t.classList.remove("shipPlaceholder");const{x:r,y:c}=h(e);i.isValidPlacement(r,c,o,s)&&d(r,c,"shipPlaceholder",s,o)}function d(t,e,n,r,i){const s=document.querySelectorAll(".cell");for(let o=0;o<i;o++){let i;i="row"===r?u(t+o,e):u(t,e+o),s[i].classList.add(n)}}function h(t){return{y:Math.floor(t/7),x:t%7}}function u(t,e){return 7*e+t}return{init:function(){const e=document.createElement("div");e.setAttribute("id","shipPlacementPage");const n=document.createElement("h2");n.innerText=r.shift(),e.appendChild(n);const i=document.createElement("button");i.innerText="Axis: row",i.addEventListener("click",c),e.append(i);const s=document.createElement("div");s.classList.add("grid"),s.style.gridTemplateColumns="repeat(7, 1fr)",s.style.gridTemplateRows="repeat(7, 1fr)";for(let t=0;t<49;t++){const e=document.createElement("div");e.classList.add("cell"),e.dataset.index=t,e.addEventListener("mouseover",l),e.addEventListener("click",a),s.appendChild(e)}e.appendChild(s),t.appendChild(e)}}})().init()})();